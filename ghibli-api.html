<!DOCTYPE html>
<html lang="en">
    <head>
        <script
        src="assets/jquery-3.2.1.js"></script>
        <script type="text/javascript">
            var apiUrl = "https://cors-anywhere.herokuapp.com/http://112.206.234.26/SwissKnife_dev_stage/index.cgi";
            var username = "ussd";
            var password = "ussd2019";
            var actionPoint = "http://127.0.0.1/SwissKnife_dev_stage/databank.cgi";
            var xhr = new  XMLHttpRequest();
            var a;
            var breakLine = null;
            var dataToPass = JSON.stringify({
                "method":"select",
                            "data":{
                                "table":"keyword",
                                "returnID":"1"
                            }
            });
            $(function (){
                //handshake
                // $.ajax({
                //     type: "POST",
                //     url: apiUrl,
                //     contentType: "application/json",
                //     data:"json",
                //     async: true,
                //     data:JSON.stringify({
                //         "method":"select",
                //         "data" : {
                //             "table": "keyword",
                //             "returnID": "1"
                //         },
                //     }),
                //     beforeSend : function(xhr){
                //         xhr.setRequestHeader ("Basic", btoa(username + ":" + password));
                //         xhr.setRequestHeader ("Action", actionPoint);
                //     },
                //     success: function(data){
                //         console.log(data);
            
                //         console.log('hand shake established');
                //     },

                //     // complete: function() {
                        
                //     // }
                // });
                //Get Data
                $.ajax({
                        type: "POST",
                        url: apiUrl,
                        contentType:"json",
                        data:dataToPass,
                        beforeSend : function(xhr){
                            console.log('beforeSend');
                            xhr.setRequestHeader ("Basic", btoa(username + ":" + password));
                            xhr.setRequestHeader ("Action", actionPoint);
                            
                        },
                        success: function(response) {
                            console.log('success');
                            dataParse = response;
                            console.log(dataParse);
                            parsing = JSON.parse(dataParse);
                            console.log(parsing);
                            console.log(parsing.methodResponse.content);
                            splitUnderscore = parsing.methodResponse.content;
                            splitSpace = splitUnderscore.split('_').join(' ');
                            console.log(splitSpace);
                            nextLine = splitSpace.split('|').join("<br/>");
                            nextLine = $('.firstMenu').value();
                        },
                        error: function(jqXHR,textStatus,errorThrown) {
                           console.log(textStatus,errorThrown)
                        },
                    });

                    // jQuery.ajaxPrefilter(function(options){
                    //     console.log('pasok ba?');
                    //     if (options.crossDomain && jQuery.support.cors) {
                    //         options.apiUrl = '112.206.234.26' + options.url;
                    //         console.log('testing');
                    //     }
                    // });
            
        });

        
        </script>
    </head>
    <body>
       <h1 id="h1n1">auth</h1>
           <p class="firstMenu"></p>
       <button id="sendReq">Request Data</button>
    </body>

</html>